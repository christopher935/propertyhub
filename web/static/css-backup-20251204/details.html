<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.property.title}} - PropertyHub</title>
    <meta name="description" content="{{.property.description}} Located at {{.property.address}}, {{.property.city}}, {{.property.state}}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    
    <!-- Scout CSS -->
    <link rel="stylesheet" href="/static/css/scout.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    <!-- Image Gallery -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>
</head>
<body class="scout-admin-body">

<!-- Admin Layout -->
<div class="scout-admin-layout">
    
    <!-- Sidebar -->
    <aside class="scout-admin-sidebar">
        <div class="scout-sidebar-header">
            <a href="/" class="scout-sidebar-logo">PropertyHub</a>
            <div class="scout-user-menu">
                <div class="scout-user-avatar">CG</div>
                <div class="scout-user-info">
                    <span class="scout-user-name">Christopher Gross</span>
                    <span class="scout-user-role">Admin</span>
                </div>
            </div>
        </div>

        <nav class="scout-sidebar-nav">
            <ul class="scout-nav-list">
                <li class="scout-nav-item">
                    <a href="/dashboard" class="scout-nav-link">
                        <span class="scout-nav-icon">üìä</span>
                        <span class="scout-nav-text">Dashboard</span>
                    </a>
                </li>
                
                <li class="scout-nav-item">
                    <a href="/properties" class="scout-nav-link scout-nav-link-active">
                        <span class="scout-nav-icon">üè†</span>
                        <span class="scout-nav-text">Properties</span>
                        <span class="scout-badge scout-badge-neutral">87</span>
                    </a>
                </li>
                
                <li class="scout-nav-item">
                    <a href="/bookings" class="scout-nav-link">
                        <span class="scout-nav-icon">üìÖ</span>
                        <span class="scout-nav-text">Bookings</span>
                        <span class="scout-badge scout-badge-warning">12</span>
                    </a>
                </li>
                
                <li class="scout-nav-item">
                    <a href="/analytics" class="scout-nav-link">
                        <span class="scout-nav-icon">üìà</span>
                        <span class="scout-nav-text">Analytics</span>
                    </a>
                </li>
                
                <li class="scout-nav-item">
                    <a href="/reports" class="scout-nav-link">
                        <span class="scout-nav-icon">üìã</span>
                        <span class="scout-nav-text">Reports</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="scout-admin-main scout-property-details">
        
        <!-- Breadcrumbs -->
        <nav class="scout-breadcrumb">
            <ol class="scout-breadcrumb-list">
                <li class="scout-breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
                <li class="scout-breadcrumb-item"><a href="/properties">Properties</a></li>
                <li class="scout-breadcrumb-item scout-breadcrumb-active">Property Details</li>
            </ol>
        </nav>

        <!-- Property Header -->
        <div class="scout-property-header">
            <div class="scout-property-title-section">
                <div>
                    <h1 class="scout-property-title">Luxury Downtown Loft</h1>
                    <div class="scout-property-subtitle">
                        <span class="scout-property-address">üìç 123 Main Street, Houston, TX 77002</span>
                        <span class="scout-property-mls">MLS ID: HAR123456</span>
                    </div>
                </div>
                
                <div class="scout-property-actions">
                    <button class="scout-btn scout-btn-outline" id="favoriteButton">
                        <span class="scout-btn-icon">‚ù§Ô∏è</span>
                        Save Property
                    </button>
                    <button class="scout-btn scout-btn-outline" id="shareButton">
                        <span class="scout-btn-icon">üì§</span>
                        Share
                    </button>
                    <button class="scout-btn btn-primary-consumer-consumer" id="bookNowButton">
                        <span class="scout-btn-icon">üìÖ</span>
                        Book Now
                    </button>
                </div>
            </div>
            
            <!-- Quick Stats -->
            <div class="scout-property-quick-stats">
                <div class="scout-quick-stat">
                    <span class="scout-stat-value">$3,200</span>
                    <span class="scout-stat-label">per month</span>
                </div>
                <div class="scout-quick-stat">
                    <span class="scout-stat-value">2</span>
                    <span class="scout-stat-label">bedrooms</span>
                </div>
                <div class="scout-quick-stat">
                    <span class="scout-stat-value">2</span>
                    <span class="scout-stat-label">bathrooms</span>
                </div>
                <div class="scout-quick-stat">
                    <span class="scout-stat-value">1,200</span>
                    <span class="scout-stat-label">sqft</span>
                </div>
                <div class="scout-quick-stat scout-quick-stat-success">
                    <span class="scout-stat-value">Available</span>
                    <span class="scout-stat-label">now</span>
                </div>
            </div>
        </div>

        <!-- Property Content Grid -->
        <div class="scout-property-content">
            
            <!-- Photo Gallery -->
            <div class="scout-property-gallery">
                <div class="scout-gallery-main">
                    <div class="scout-gallery-main-image">
                        <img src="/static/images/property-1-main.jpg" alt="Main property image" id="mainImage">
                        <div class="scout-gallery-overlay">
                            <button class="scout-gallery-control scout-gallery-prev" id="prevImage">‚Äπ</button>
                            <button class="scout-gallery-control scout-gallery-next" id="nextImage">‚Ä∫</button>
                            <div class="scout-gallery-counter">
                                <span id="currentImageIndex">1</span> / <span id="totalImages">12</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scout-gallery-thumbnails" id="thumbnailGallery">
                        <div class="scout-thumbnail scout-thumbnail-active" data-index="0">
                            <img src="/static/images/property-1-thumb-1.jpg" alt="Thumbnail 1">
                        </div>
                        <div class="scout-thumbnail" data-index="1">
                            <img src="/static/images/property-1-thumb-2.jpg" alt="Thumbnail 2">
                        </div>
                        <div class="scout-thumbnail" data-index="2">
                            <img src="/static/images/property-1-thumb-3.jpg" alt="Thumbnail 3">
                        </div>
                        <div class="scout-thumbnail" data-index="3">
                            <img src="/static/images/property-1-thumb-4.jpg" alt="Thumbnail 4">
                        </div>
                        <div class="scout-thumbnail" data-index="4">
                            <img src="/static/images/property-1-thumb-5.jpg" alt="Thumbnail 5">
                        </div>
                        <div class="scout-thumbnail scout-thumbnail-more" onclick="openFullGallery()">
                            <div class="scout-thumbnail-overlay">
                                <span>+7 more</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="scout-gallery-actions">
                    <button class="scout-btn scout-btn-outline scout-btn-sm" onclick="openFullGallery()">
                        <span class="scout-btn-icon">üñºÔ∏è</span>
                        View All Photos (12)
                    </button>
                    <button class="scout-btn scout-btn-outline scout-btn-sm" onclick="openVirtualTour()">
                        <span class="scout-btn-icon">üëÄ</span>
                        Virtual Tour
                    </button>
                    <button class="scout-btn scout-btn-outline scout-btn-sm" onclick="openFloorPlan()">
                        <span class="scout-btn-icon">üìê</span>
                        Floor Plan
                    </button>
                </div>
            </div>

            <!-- Property Information -->
            <div class="scout-property-info">
                
                <!-- Tabs -->
                <div class="scout-tabs">
                    <button class="scout-tab scout-tab-active" data-tab="overview">Overview</button>
                    <button class="scout-tab" data-tab="amenities">Amenities</button>
                    <button class="scout-tab" data-tab="location">Location</button>
                    <button class="scout-tab" data-tab="pricing">Pricing</button>
                    <button class="scout-tab" data-tab="documents">Documents</button>
                </div>

                <!-- Overview Tab -->
                <div class="scout-tab-content scout-tab-content-active" id="overviewTab">
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Property Description</h3>
                        </div>
                        <div class="scout-card-body">
                            <p>Experience luxury living in this stunning downtown loft featuring high ceilings, exposed brick, and floor-to-ceiling windows with breathtaking city views. This modern 2-bedroom, 2-bathroom unit offers 1,200 square feet of thoughtfully designed living space.</p>
                            
                            <p>The open-concept layout seamlessly connects the gourmet kitchen with stainless steel appliances, granite countertops, and custom cabinetry to the spacious living area. The master suite includes a walk-in closet and spa-like bathroom with dual vanities and a rainfall shower.</p>
                            
                            <p>Building amenities include 24/7 concierge service, fitness center, rooftop pool, and secure parking. Located in the heart of downtown Houston, you'll be steps away from world-class dining, entertainment, and cultural attractions.</p>
                        </div>
                    </div>
                    
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Property Features</h3>
                        </div>
                        <div class="scout-card-body">
                            <div class="scout-features-grid">
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üè†</span>
                                    <div>
                                        <strong>Property Type</strong>
                                        <p>Loft/Apartment</p>
                                    </div>
                                </div>
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üìÖ</span>
                                    <div>
                                        <strong>Year Built</strong>
                                        <p>2018</p>
                                    </div>
                                </div>
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üöó</span>
                                    <div>
                                        <strong>Parking</strong>
                                        <p>1 Covered Space</p>
                                    </div>
                                </div>
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üêï</span>
                                    <div>
                                        <strong>Pet Policy</strong>
                                        <p>Cats & Dogs Allowed</p>
                                    </div>
                                </div>
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üìè</span>
                                    <div>
                                        <strong>Square Footage</strong>
                                        <p>1,200 sqft</p>
                                    </div>
                                </div>
                                <div class="scout-feature-item">
                                    <span class="scout-feature-icon">üîë</span>
                                    <div>
                                        <strong>Lease Term</strong>
                                        <p>12 months minimum</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amenities Tab -->
                <div class="scout-tab-content" id="amenitiesTab">
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Building Amenities</h3>
                        </div>
                        <div class="scout-card-body">
                            <div class="scout-amenities-grid">
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>24/7 Concierge</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Fitness Center</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Rooftop Pool</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Secure Parking</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Business Center</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Package Room</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Unit Amenities</h3>
                        </div>
                        <div class="scout-card-body">
                            <div class="scout-amenities-grid">
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Stainless Steel Appliances</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Granite Countertops</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Hardwood Floors</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>In-Unit Washer/Dryer</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Walk-In Closets</span>
                                </div>
                                <div class="scout-amenity-item">
                                    <span class="scout-amenity-icon">‚úÖ</span>
                                    <span>Central AC/Heat</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Location Tab -->
                <div class="scout-tab-content" id="locationTab">
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Location</h3>
                        </div>
                        <div class="scout-card-body">
                            <div id="propertyMap" class="scout-map"></div>
                            <div class="scout-location-info">
                                <p><strong>Address:</strong> 123 Main Street, Houston, TX 77002</p>
                                <p><strong>Neighborhood:</strong> Downtown Houston</p>
                                <p><strong>Walk Score:</strong> 95/100 (Walker's Paradise)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Nearby</h3>
                        </div>
                        <div class="scout-card-body">
                            <ul class="scout-nearby-list">
                                <li>üçΩÔ∏è <strong>Restaurants:</strong> 50+ within walking distance</li>
                                <li>üõçÔ∏è <strong>Shopping:</strong> Downtown Aquarium, Market Square</li>
                                <li>üöá <strong>Transit:</strong> Metro Rail - 2 blocks</li>
                                <li>üè• <strong>Healthcare:</strong> Memorial Hermann - 1 mile</li>
                                <li>üé≠ <strong>Entertainment:</strong> Theater District - 0.5 miles</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Pricing Tab -->
                <div class="scout-tab-content" id="pricingTab">
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Pricing Details</h3>
                        </div>
                        <div class="scout-card-body">
                            <div class="scout-pricing-grid">
                                <div class="scout-pricing-item">
                                    <span class="scout-pricing-label">Monthly Rent</span>
                                    <span class="scout-pricing-value">$3,200</span>
                                </div>
                                <div class="scout-pricing-item">
                                    <span class="scout-pricing-label">Security Deposit</span>
                                    <span class="scout-pricing-value">$3,200</span>
                                </div>
                                <div class="scout-pricing-item">
                                    <span class="scout-pricing-label">Application Fee</span>
                                    <span class="scout-pricing-value">$50</span>
                                </div>
                                <div class="scout-pricing-item">
                                    <span class="scout-pricing-label">Pet Deposit</span>
                                    <span class="scout-pricing-value">$300</span>
                                </div>
                            </div>
                            
                            <div class="scout-alert scout-alert-info">
                                <span class="scout-alert-icon">‚ÑπÔ∏è</span>
                                <div class="scout-alert-content">
                                    <p><strong>Move-in Costs:</strong> First month's rent ($3,200) + Security deposit ($3,200) + Application fee ($50) = <strong>$6,450</strong></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents Tab -->
                <div class="scout-tab-content" id="documentsTab">
                    <div class="scout-card">
                        <div class="scout-card-header">
                            <h3 class="scout-card-title">Required Documents</h3>
                        </div>
                        <div class="scout-card-body">
                            <ul class="scout-documents-list">
                                <li>
                                    <a href="/docs/TREC_Consumer_Protection_Notice.pdf" target="_blank" class="scout-document-link">
                                        <span class="scout-document-icon">üìÑ</span>
                                        <div>
                                            <strong>TREC Consumer Protection Notice</strong>
                                            <p>Required disclosure for Texas real estate transactions</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://members.har.com/mhf/terms/dispBrokerInfo.cfm?sitetype=aws&cid=625244" target="_blank" class="scout-document-link">
                                        <span class="scout-document-icon">üìÑ</span>
                                        <div>
                                            <strong>IABS Form</strong>
                                            <p>Information About Brokerage Services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="/docs/Lease_Agreement_Template.pdf" target="_blank" class="scout-document-link">
                                        <span class="scout-document-icon">üìÑ</span>
                                        <div>
                                            <strong>Lease Agreement</strong>
                                            <p>Standard residential lease agreement</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Booking Panel -->
            <div class="scout-booking-panel">
                <div class="scout-card scout-card-sticky">
                    <div class="scout-card-header">
                        <h3 class="scout-card-title">Book a Showing</h3>
                        <p class="scout-card-subtitle">Schedule your visit today</p>
                    </div>
                    <div class="scout-card-body">
                        <form id="bookingForm">
                            <div class="scout-form-group">
                                <label class="scout-form-label">Preferred Date</label>
                                <input type="date" class="scout-form-input" id="bookingDate" required>
                            </div>
                            
                            <div class="scout-form-group">
                                <label class="scout-form-label">Preferred Time</label>
                                <select class="scout-form-select" id="bookingTime" required>
                                    <option value="">Select time</option>
                                    <option value="09:00">9:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">1:00 PM</option>
                                    <option value="14:00">2:00 PM</option>
                                    <option value="15:00">3:00 PM</option>
                                    <option value="16:00">4:00 PM</option>
                                    <option value="17:00">5:00 PM</option>
                                </select>
                            </div>
                            
                            <div class="scout-form-group">
                                <label class="scout-form-label">Full Name</label>
                                <input type="text" class="scout-form-input" id="guestName" required>
                            </div>
                            
                            <div class="scout-form-group">
                                <label class="scout-form-label">Email</label>
                                <input type="email" class="scout-form-input" id="guestEmail" required>
                            </div>
                            
                            <div class="scout-form-group">
                                <label class="scout-form-label">Phone</label>
                                <input type="tel" class="scout-form-input" id="guestPhone" required>
                            </div>
                            
                            <div class="scout-form-group">
                                <label class="scout-form-label">Special Requests</label>
                                <textarea class="scout-form-textarea" id="specialRequests" rows="3"></textarea>
                            </div>
                            
                            <button type="submit" class="scout-btn btn-primary-consumer scout-btn-block">
                                <span class="scout-btn-icon">üìÖ</span>
                                Schedule Showing
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="scout-card">
                    <div class="scout-card-header">
                        <h3 class="scout-card-title">Contact Agent</h3>
                    </div>
                    <div class="scout-card-body">
                        <div class="scout-agent-info">
                            <div class="scout-agent-avatar">CG</div>
                            <div>
                                <strong>Christopher Gross</strong>
                                <p>Principal Broker</p>
                                <p>License: 625244</p>
                            </div>
                        </div>
                        <a href="tel:7135557767" class="scout-btn scout-btn-outline scout-btn-block">
                            <span class="scout-btn-icon">üìû</span>
                            Call (713) 555-PROP
                        </a>
                        <a href="mailto:chris@propertyhub.com" class="scout-btn scout-btn-outline scout-btn-block">
                            <span class="scout-btn-icon">‚úâÔ∏è</span>
                            Email Agent
                        </a>
                    </div>
                </div>
            </div>

        </div>

        <!-- Similar Properties -->
        <div class="scout-card">
            <div class="scout-card-header">
                <h3 class="scout-card-title">Similar Properties</h3>
                <a href="/properties?similar=true" class="scout-link">View All</a>
            </div>
            <div class="scout-card-body">
                <div class="scout-properties-grid">
                    <!-- Similar property cards would go here -->
                    <div class="scout-property-card">
                        <div class="scout-property-image">
                            <img src="/static/images/property-2.jpg" alt="Property">
                            <span class="scout-property-badge scout-badge-success">Available</span>
                        </div>
                        <div class="scout-property-details">
                            <h4>Modern Apartment</h4>
                            <p>456 Oak Ave, Houston, TX</p>
                            <div class="scout-property-specs">
                                <span>1 BR</span>
                                <span>1 BA</span>
                                <span>850 sqft</span>
                            </div>
                            <div class="scout-property-price">$2,100/month</div>
                        </div>
                    </div>
                    
                    <div class="scout-property-card">
                        <div class="scout-property-image">
                            <img src="/static/images/property-3.jpg" alt="Property">
                            <span class="scout-property-badge scout-badge-warning">Pending</span>
                        </div>
                        <div class="scout-property-details">
                            <h4>Urban Loft</h4>
                            <p>789 Pine St, Houston, TX</p>
                            <div class="scout-property-specs">
                                <span>2 BR</span>
                                <span>2 BA</span>
                                <span>1,100 sqft</span>
                            </div>
                            <div class="scout-property-price">$2,950/month</div>
                        </div>
                    </div>
                    
                    <div class="scout-property-card">
                        <div class="scout-property-image">
                            <img src="/static/images/property-4.jpg" alt="Property">
                            <span class="scout-property-badge scout-badge-success">Available</span>
                        </div>
                        <div class="scout-property-details">
                            <h4>Downtown Condo</h4>
                            <p>321 Elm St, Houston, TX</p>
                            <div class="scout-property-specs">
                                <span>2 BR</span>
                                <span>2 BA</span>
                                <span>1,300 sqft</span>
                            </div>
                            <div class="scout-property-price">$3,400/month</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

</div>

<script>
// Property Details JavaScript
document.addEventListener('DOMContentLoaded', function() {
    
    // Tabs
    const tabs = document.querySelectorAll('.scout-tab');
    const tabContents = document.querySelectorAll('.scout-tab-content');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Remove active class from all tabs and contents
            tabs.forEach(t => t.classList.remove('scout-tab-active'));
            tabContents.forEach(c => c.classList.remove('scout-tab-content-active'));
            
            // Add active class to clicked tab and corresponding content
            this.classList.add('scout-tab-active');
            document.getElementById(targetTab + 'Tab').classList.add('scout-tab-content-active');
        });
    });
    
    // Gallery
    let currentImageIndex = 0;
    const images = [
        '/static/images/property-1-main.jpg',
        '/static/images/property-1-2.jpg',
        '/static/images/property-1-3.jpg',
        '/static/images/property-1-4.jpg',
        '/static/images/property-1-5.jpg',
        '/static/images/property-1-6.jpg',
        '/static/images/property-1-7.jpg',
        '/static/images/property-1-8.jpg',
        '/static/images/property-1-9.jpg',
        '/static/images/property-1-10.jpg',
        '/static/images/property-1-11.jpg',
        '/static/images/property-1-12.jpg'
    ];
    
    document.getElementById('prevImage').addEventListener('click', function() {
        currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
        updateGallery();
    });
    
    document.getElementById('nextImage').addEventListener('click', function() {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        updateGallery();
    });
    
    function updateGallery() {
        document.getElementById('mainImage').src = images[currentImageIndex];
        document.getElementById('currentImageIndex').textContent = currentImageIndex + 1;
        
        // Update thumbnails
        document.querySelectorAll('.scout-thumbnail').forEach((thumb, index) => {
            if (index === currentImageIndex) {
                thumb.classList.add('scout-thumbnail-active');
            } else {
                thumb.classList.remove('scout-thumbnail-active');
            }
        });
    }
    
    // Thumbnail clicks
    document.querySelectorAll('.scout-thumbnail[data-index]').forEach(thumb => {
        thumb.addEventListener('click', function() {
            currentImageIndex = parseInt(this.getAttribute('data-index'));
            updateGallery();
        });
    });
    
    // Initialize GLightbox for full gallery
    const lightbox = GLightbox({
        selector: '.glightbox'
    });
    
    // Map
    const map = L.map('propertyMap').setView([29.7604, -95.3698], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors'
    }).addTo(map);
    L.marker([29.7604, -95.3698]).addTo(map)
        .bindPopup('123 Main Street, Houston, TX 77002')
        .openPopup();
    
    // Booking Form
    document.getElementById('bookingForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = {
            property_id: 'prop_001',
            date: document.getElementById('bookingDate').value,
            time: document.getElementById('bookingTime').value,
            guest_name: document.getElementById('guestName').value,
            guest_email: document.getElementById('guestEmail').value,
            guest_phone: document.getElementById('guestPhone').value,
            special_requests: document.getElementById('specialRequests').value
        };
        
        try {
            const response = await fetch('/api/bookings/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });
            
            const data = await response.json();
            
            if (data.success) {
                alert('Showing scheduled successfully! You will receive a confirmation email shortly.');
                this.reset();
            } else {
                alert('Error scheduling showing: ' + data.error);
            }
        } catch (error) {
            alert('Network error. Please try again.');
        }
    });
    
    // Favorite Button
    document.getElementById('favoriteButton').addEventListener('click', function() {
        this.classList.toggle('btn-primary-consumer');
        this.classList.toggle('scout-btn-outline');
        const icon = this.querySelector('.scout-btn-icon');
        icon.textContent = this.classList.contains('btn-primary-consumer') ? '‚ù§Ô∏è' : 'ü§ç';
    });
    
    // Share Button
    document.getElementById('shareButton').addEventListener('click', function() {
        if (navigator.share) {
            navigator.share({
                title: 'Luxury Downtown Loft',
                text: 'Check out this amazing property!',
                url: window.location.href
            });
        } else {
            // Fallback: copy to clipboard
            navigator.clipboard.writeText(window.location.href);
            alert('Link copied to clipboard!');
        }
    });
    
    // Book Now Button
    document.getElementById('bookNowButton').addEventListener('click', function() {
        document.getElementById('bookingDate').scrollIntoView({ behavior: 'smooth' });
        document.getElementById('bookingDate').focus();
    });
});

// Gallery Functions
function openFullGallery() {
    // Open GLightbox gallery
    const lightbox = GLightbox({
        elements: [
            { href: '/static/images/property-1-main.jpg', type: 'image' },
            { href: '/static/images/property-1-2.jpg', type: 'image' },
            { href: '/static/images/property-1-3.jpg', type: 'image' },
            { href: '/static/images/property-1-4.jpg', type: 'image' },
            { href: '/static/images/property-1-5.jpg', type: 'image' },
            { href: '/static/images/property-1-6.jpg', type: 'image' },
            { href: '/static/images/property-1-7.jpg', type: 'image' },
            { href: '/static/images/property-1-8.jpg', type: 'image' },
            { href: '/static/images/property-1-9.jpg', type: 'image' },
            { href: '/static/images/property-1-10.jpg', type: 'image' },
            { href: '/static/images/property-1-11.jpg', type: 'image' },
            { href: '/static/images/property-1-12.jpg', type: 'image' }
        ]
    });
    lightbox.open();
}

function openVirtualTour() {
    window.open('/virtual-tour/prop_001', '_blank');
}

function openFloorPlan() {
    window.open('/floor-plan/prop_001.pdf', '_blank');
}
</script>

<style>
/* Minimal custom styles for map and gallery */
.scout-map {
    width: 100%;
    height: 400px;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.scout-property-content {
    display: grid;
    grid-template-columns: 1fr 1fr 400px;
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.scout-property-gallery {
    grid-column: 1 / 3;
}

.scout-booking-panel {
    grid-column: 3;
}

.scout-property-info {
    grid-column: 1 / 3;
}

.scout-card-sticky {
    position: sticky;
    top: 1rem;
}

@media (max-width: 1200px) {
    .scout-property-content {
        grid-template-columns: 1fr;
    }
    
    .scout-property-gallery,
    .scout-property-info,
    .scout-booking-panel {
        grid-column: 1;
    }
}
</style>

</body>
</html>
