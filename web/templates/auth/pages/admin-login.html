<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Admin Sign In | Landlords of Texas</title>
<meta content="Sign in to your Landlords of Texas admin account." name="description"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<link href="/static/css/design-tokens.css" rel="stylesheet"/>
<link href="/static/css/scout-utilities.css" rel="stylesheet"/>
<link href="/static/css/scout-layouts.css" rel="stylesheet"/>
<link href="/static/css/scout-components.css" rel="stylesheet"/>
<link href="/static/css/password-strength.css" rel="stylesheet"/>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<link href="/static/css/password-strength.css" rel="stylesheet"/>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="page-login">
<!-- SVG Icon Sprite -->
<svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg">
<symbol fill="none" id="icon-home" stroke="currentColor" stroke-width="1.5" viewbox="0 0 24 24">
<path d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" stroke-linecap="round" stroke-linejoin="round"></path>
</symbol>
<symbol fill="none" id="icon-lock" stroke="currentColor" stroke-width="1.5" viewbox="0 0 24 24">
<path d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" stroke-linecap="round" stroke-linejoin="round"></path>
</symbol>
<symbol fill="none" id="icon-envelope" stroke="currentColor" stroke-width="1.5" viewbox="0 0 24 24">
<path d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" stroke-linecap="round" stroke-linejoin="round"></path>
</symbol>
</svg>
<div class="login-container" x-data="loginData()">
<div class="login-card">
<!-- Header -->
<div class="login-header">
<a class="logo" href="/">
<span class="logo-icon">
<svg height="48" width="48"><use href="#icon-home"></use></svg>
</span>
<span>Landlords of Texas</span>
</a>
<h2>Admin Sign In</h2>
<p>Access your admin dashboard</p>
</div>
<!-- Rate Limit Notice -->
<div class="rate-limit-notice" x-show="rateLimited" x-cloak>
<p>Too many login attempts. Please wait <span x-text="retryAfter"></span> seconds.</p>
<p class="text-sm">Forgot your password? <a href="/forgot-password">Reset it here</a></p>
</div>
{% if Error %}
<div class="alert alert-error" style="background: #fee2e2; border: 1px solid #ef4444; color: #991b1b; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px;">
<p style="margin: 0; font-weight: 500;">{{ Error }}</p>
</div>
{% endif %}
<!-- Login Form -->
<form action="/admin/login" class="auth-form login-form" method="POST" id="loginForm" @submit="handleSubmit">
        <input type="hidden" name="csrf_token" value="{{ CSRFToken }}">
<!-- Email Field -->
<div class="form-group">
<label class="form-label" for="email">Email Address</label>
<input autocomplete="email" class="form-input" id="email" name="email" placeholder="admin@landlords-of-texas.com" required="" type="email"/>
</div>
<!-- Password Field -->
<div class="form-group">
<label class="form-label" for="password">Password</label>
<div class="password-input-wrapper">
<input autocomplete="current-password" class="form-input" id="password" name="password" placeholder="Enter your password" required="" type="password"/>
<button type="button" class="password-toggle" onclick="togglePassword('password')" aria-label="Toggle password visibility">
<svg class="icon-show" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
</svg>
<svg class="icon-hide" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:none">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
</svg>
</button>
</div>
</div>
<!-- Remember Me & Forgot Password -->
<div class="form-checkbox-group">
<label class="checkbox-label">
<input class="checkbox-label-input" name="remember" type="checkbox" value="1"/>
<div class="checkbox-box">
<span class="checkbox-check checkbox-label-label">âœ“</span>
</div>
<span class="checkbox-label-label">Remember me</span>
</label>
<a class="forgot-link" href="/forgot-password">Forgot password?</a>
</div>
<!-- Submit Button -->
<button class="btn btn-primary w-full" type="submit">Sign In</button>
</form>
<!-- Footer Links -->
<div class="login-footer">
<p class="login-footer-text">Need help?</p>
<a class="forgot-link" href="/contact">Contact Support</a>
</div>
</div>
</div>
<script>
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const wrapper = input.closest('.password-input-wrapper');
    const showIcon = wrapper.querySelector('.icon-show');
    const hideIcon = wrapper.querySelector('.icon-hide');
    
    if (input.type === 'password') {
        input.type = 'text';
        showIcon.style.display = 'none';
        hideIcon.style.display = 'block';
    } else {
        input.type = 'password';
        showIcon.style.display = 'block';
        hideIcon.style.display = 'none';
    }
}

function loginData() {
    return {
        rateLimited: false,
        retryAfter: 0,
        
        init() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('rate_limited')) {
                this.rateLimited = true;
                this.retryAfter = parseInt(urlParams.get('retry_after') || '60');
                this.startCountdown();
            }
        },
        
        startCountdown() {
            const interval = setInterval(() => {
                this.retryAfter--;
                if (this.retryAfter <= 0) {
                    clearInterval(interval);
                    this.rateLimited = false;
                    const url = new URL(window.location);
                    url.searchParams.delete('rate_limited');
                    url.searchParams.delete('retry_after');
                    window.history.replaceState({}, '', url);
                }
            }, 1000);
        },
        
        handleSubmit(e) {
            if (this.rateLimited) {
                e.preventDefault();
                return false;
            }
        }
    };
}
</script>
</body>
</html>
