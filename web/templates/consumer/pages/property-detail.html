<!DOCTYPE html>

<html lang="en">
{{template "_head.html" .}}
<body class="scout-consumer-layout page-property-detail">
{{template "_svg_sprite.html"}}
{{template "_nav.html" .}}
<main class="property-detail-content">
<div class="container">
<div class="property-header mb-8">
<div>
<h1 class="text-heading-1 text-navy mb-2">{{.Property.Address}}</h1>
<p class="text-body text-gray-600 mb-4">{{.Property.City}}, {{.Property.State}} {{.Property.ZipCode}}</p>
<div class="property-badges">
<span class="badge badge-navy">{{.Property.PropertyType}}</span>
{{if eq .Property.Status "available"}}
<span class="badge badge-green">Available</span>
{{else if eq .Property.Status "for_lease"}}
<span class="badge badge-success">For Lease</span>
{{else if eq .Property.Status "pending"}}
<span class="badge badge-yellow">Pending</span>
{{end}}
{{if .Property.MLSId}}
<span class="badge badge-gray">MLS #{{.Property.MLSId}}</span>
{{end}}
</div>
</div>
<div class="property-price-header">
<div class="text-heading-1 text-gold">{{formatPrice .Property.Price}}</div>
<div class="text-sm text-gray-600">per month</div>
</div>
</div>
<nav class="property-nav">
<a href="#gallery" class="nav-link">Gallery</a>
<a href="#details" class="nav-link active">Details</a>
<a href="#amenities" class="nav-link">Amenities</a>
<a href="#location" class="nav-link">Location</a>
<a href="#similar" class="nav-link">Similar Properties</a>
</nav>
<div class="property-layout">
<div class="property-main">
<div id="gallery" class="property-gallery mb-8">
{{if .Property.FeaturedImage}}
<div class="gallery-main">
<img src="{{.Property.FeaturedImage}}" alt="{{.Property.Address}}" style="width: 100%; height: auto; border-radius: 8px;">
</div>
{{else}}
<div class="image-placeholder">
<div class="placeholder-icon"><svg height="80" width="80"><use href="#icon-home-modern"></use></svg></div>
<p class="text-heading-4 text-gray-500 mb-2">Professional photos coming soon</p>
<p class="text-sm text-gray-400">Images are being professionally prepared for this listing</p>
</div>
{{end}}
<div class="gallery-thumbnails">
<button class="btn btn-outline btn-sm"><svg class="inline-icon" height="16" width="16"><use href="#icon-camera"></use></svg> Photos</button>
<button class="btn btn-outline btn-sm"><svg class="inline-icon" height="16" width="16"><use href="#icon-home-modern"></use></svg> Interior</button>
<button class="btn btn-outline btn-sm"><svg class="inline-icon" height="16" width="16"><use href="#icon-truck"></use></svg> Parking</button>
<button class="btn btn-outline btn-sm"><svg class="inline-icon" height="16" width="16"><use href="#icon-sparkles"></use></svg> Yard</button>
</div>
</div>
<section id="details" class="property-section mb-8">
<h2 class="text-heading-2 text-navy mb-4">Property Description</h2>
<div class="property-description text-body text-gray-700">
{{if .Property.Description}}
<p class="mb-4">{{.Property.Description}}</p>
{{else}}
<p class="mb-4 text-gray-500">No description available for this property.</p>
{{end}}
</div>
</section>
<section id="location" class="property-section mb-8">
<div class="section-label">
  <span class="section-label-line"></span>
  <span class="section-label-text">Neighborhood Insights</span>
  <span class="section-label-line"></span>
</div>
<p class="text-body text-gray-600 mb-6">Discover what makes this location special</p>
<div class="neighborhood-grid">
<div class="neighborhood-card">
<div class="neighborhood-icon"><svg height="24" width="24"><use href="#icon-academic-cap"></use></svg></div>
<div class="neighborhood-label">School Rating</div>
<div class="neighborhood-value">8.5/10</div>
</div>
<div class="neighborhood-card">
<div class="neighborhood-icon"><svg height="24" width="24"><use href="#icon-building-office-2"></use></svg></div>
<div class="neighborhood-label">Downtown</div>
<div class="neighborhood-value">15 min</div>
</div>
<div class="neighborhood-card">
<div class="neighborhood-icon"><svg height="24" width="24"><use href="#icon-building-storefront"></use></svg></div>
<div class="neighborhood-label">Shopping</div>
<div class="neighborhood-value">5 min</div>
</div>
</div>
</section>
<section id="similar" class="property-section" x-data="similarProperties()" x-init="load()">
<div class="section-label">
  <span class="section-label-line"></span>
  <span class="section-label-text">Similar Properties</span>
  <span class="section-label-line"></span>
</div>
<p x-show="aiReason" class="ai-insight-text mb-4" x-text="aiReason"></p>
<p class="text-body text-gray-600 mb-6">AI-matched properties based on location, price, and features</p>
<div x-show="loading" class="text-center py-8">
<div class="loading-spinner"></div>
<p class="text-gray-500 mt-2">Finding similar properties...</p>
</div>
<div x-show="!loading" class="similar-properties-grid">
<template x-for="property in properties" :key="property.id">
<div class="card property-card">
<div class="similar-property-image">
<img x-show="property.featured_image" :src="property.featured_image" :alt="property.address" style="width: 100%; height: 150px; object-fit: cover; border-radius: 8px 8px 0 0;">
<div x-show="!property.featured_image" class="similar-placeholder"><svg height="48" width="48"><use href="#icon-home-modern"></use></svg></div>
</div>
<div class="similar-property-info">
<h3 class="text-heading-3 text-navy mb-1"><a :href="'/properties/' + property.id" x-text="property.address"></a></h3>
<p class="text-gold font-bold mb-2" x-text="'$' + property.price.toLocaleString() + '/month'"></p>
<p class="text-sm text-gray-600" x-text="property.bedrooms + ' bed • ' + property.bathrooms + ' bath • ' + property.square_feet.toLocaleString() + ' sq ft'"></p>
</div>
</div>
</template>
<div x-show="properties.length === 0 && !loading" class="text-gray-500 py-8 text-center" style="grid-column: 1 / -1;">
No similar properties found at this time.
</div>
</div>
</section>
</div>
<aside class="property-sidebar">
<div class="sidebar-card mb-6">
<div class="section-label">
  <span class="section-label-line"></span>
  <span class="section-label-text">Property Details</span>
  <span class="section-label-line"></span>
</div>
<div class="details-table">
<div class="detail-row">
<span class="detail-label">Bedrooms</span>
<span class="detail-value">{{.Property.Bedrooms}}</span>
</div>
<div class="detail-row">
<span class="detail-label">Bathrooms</span>
<span class="detail-value">{{.Property.Bathrooms}}</span>
</div>
<div class="detail-row">
<span class="detail-label">Square Feet</span>
<span class="detail-value">{{formatNumber .Property.SquareFeet}} sq ft</span>
</div>
<div class="detail-row">
<span class="detail-label">Property Type</span>
<span class="detail-value">{{.Property.PropertyType}}</span>
</div>
{{if .Property.YearBuilt}}
<div class="detail-row">
<span class="detail-label">Year Built</span>
<span class="detail-value">{{.Property.YearBuilt}}</span>
</div>
{{end}}
<div class="detail-row">
<span class="detail-label">Days on Market</span>
<span class="detail-value">{{.DaysOnMarket}}</span>
</div>
<div class="detail-row">
<span class="detail-label">Listing Agent</span>
<span class="detail-value">{{.Agent.Name}}</span>
</div>
</div>
</div>
<div class="sidebar-card">
<h3 class="text-heading-3 text-navy mb-4">Schedule Your Tour</h3>
<p class="text-body text-gray-600 mb-6">See this property in person with expert guidance</p>
<a class="btn btn-primary-consumer btn-block mb-3" href="/book-showing?property_id={{.Property.ID}}"><svg class="inline-icon" height="16" width="16"><use href="#icon-calendar"></use></svg> Schedule A Tour</a>
<div class="contact-buttons">
<a class="btn btn-outline" href="tel:+12819257222">Call</a>
<a class="btn btn-outline" href="sms:+12819257222">Text</a>
</div>
<div class="agent-card mt-6">
<div class="agent-avatar">{{.Agent.Initials}}</div>
<div class="agent-info">
<h4 class="text-heading-4 text-navy mb-1">{{.Agent.Name}}</h4>
<p class="text-sm text-gray-600 mb-1">Licensed Real Estate Agent</p>
<p class="text-xs text-gray-500">License #{{.Agent.LicenseNumber}}</p>
</div>
</div>
</div>
</aside>
</div>
</div>
</main>
{{template "_footer.html"}}
{{template "_scripts.html" .}}
<script src="/static/js/property-details.js"></script>
<script>
function similarProperties() {
return {
properties: [],
aiReason: '',
loading: true,
async load() {
const propertyId = window.location.pathname.split('/').pop();
try {
const response = await fetch(`/api/properties/${propertyId}/similar`);
if (!response.ok) throw new Error('Failed to load similar properties');
const data = await response.json();
this.properties = data.similar_properties || [];
this.aiReason = data.ai_reason || '';
} catch (error) {
console.error('Error loading similar properties:', error);
} finally {
this.loading = false;
}
}
}
}
</script>
</body>
</html>
