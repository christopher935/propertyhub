<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - PropertyHub Admin</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="stylesheet" href="/static/css/admin-design-tokens.css">
    <link rel="stylesheet" href="/static/css/admin-scout-utilities.css">
    <link rel="stylesheet" href="/static/css/admin-scout-layouts.css">
    <link rel="stylesheet" href="/static/css/scout-components-admin.css">
    <style>
        /* User Dropdown Styles */
        .user-dropdown {
            position: relative;
        }

        .admin-user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .admin-user-menu:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .dropdown-arrow {
            color: #6b7280;
            transition: transform 0.2s;
        }

        .user-dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .user-dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s;
            z-index: 1000;
        }

        .user-dropdown.active .user-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown-item {
            display: block;
            padding: 12px 16px;
            color: #374151;
            text-decoration: none;
            transition: background 0.2s;
        }

        .user-dropdown-item:hover {
            background: #f3f4f6;
        }

        .user-dropdown-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 4px 0;
        }
    </style>
</head>
<body class="admin-layout">
    
    <aside class="admin-sidebar">
    <div class="sidebar-header">
        <a href="/" class="sidebar-logo">
            <div class="sidebar-logo-icon">PH</div>
            <span>PropertyHub</span>
        </a>
    </div>

    <nav class="admin-sidebar-nav">
        
        <div class="nav-section">
            <a href="/admin/dashboard" class="nav-section-header">
                <span class="nav-section-icon">OV</span>
                <span class="nav-section-title">Overview</span>
            </a>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="properties">
                <span class="nav-section-icon">PS</span>
                <span class="nav-section-title">Properties & Showings</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/properties" class="nav-item">All Properties</a></li>
                <li><a href="/admin/properties#tab2" class="nav-item">Property Performance</a></li>
                <li><a href="/admin/photos" class="nav-item">Photos</a></li>
                <li><a href="/admin/properties#tab3" class="nav-item">Showing Calendar</a></li>
                <li><a href="/admin/bookings" class="nav-item">Booking Management</a></li>
                <li><a href="/admin/properties#tab4" class="nav-item">HAR Sync</a></li>
                <li><a href="/admin/properties#tab5" class="nav-item">Pre-Listing Manager</a></li>
                <li><a href="/admin/properties#tab6" class="nav-item">Valuations</a></li>
            </ul>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="leads">
                <span class="nav-section-icon">LC</span>
                <span class="nav-section-title">Leads & Conversion</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/leads" class="nav-item">Lead Management</a></li>
                <li><a href="/admin/lead-sources" class="nav-item">Lead Sources</a></li>
                <li><a href="/admin/business-intelligence#tab2" class="nav-item">Conversion Funnel</a></li>
                <li><a href="/admin/client-portal" class="nav-item">Client Portal</a></li>
                <li><a href="/admin/business-intelligence#tab5" class="nav-item">Behavioral Intelligence</a></li>
            </ul>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="communications">
                <span class="nav-section-icon">CM</span>
                <span class="nav-section-title">Communications</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/communication-center" class="nav-item">Communication Center</a></li>
                <li><a href="/admin/email-management" class="nav-item">Email Management</a></li>
            </ul>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="workflow">
                <span class="nav-section-icon">WF</span>
                <span class="nav-section-title">Workflow</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/application-workflow" class="nav-item">Applications</a></li>
                <li><a href="/admin/application-workflow#tab2" class="nav-item">Approvals</a></li>
                <li><a href="/admin/application-workflow#tab3" class="nav-item">Closing Pipeline</a></li>
            </ul>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="analytics">
                <span class="nav-section-icon">AR</span>
                <span class="nav-section-title">Analytics & Reports</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/business-intelligence" class="nav-item">Business Intelligence</a></li>
                <li><a href="/admin/market-analytics" class="nav-item">Market Analytics</a></li>
                <li><a href="/admin/performance-reports" class="nav-item">Performance Reports</a></li>
                <li><a href="/admin/custom-reports" class="nav-item">Custom Reports</a></li>
                <li><a href="/admin/friday-reports" class="nav-item">Friday Reports</a></li>
            </ul>
        </div>

        
        <div class="nav-section">
            <button class="nav-section-header" data-section="system">
                <span class="nav-section-icon">SY</span>
                <span class="nav-section-title">System</span>
                <span class="nav-section-toggle">›</span>
            </button>
            <ul class="nav-section-items">
                <li><a href="/admin/settings" class="nav-item">Settings</a></li>
                <li><a href="/admin/security" class="nav-item">Security</a></li>
                <li><a href="/admin/users" class="nav-item">User Management</a></li>
                <li><a href="/admin/rbac" class="nav-item">Access Control (RBAC)</a></li>
                <li><a href="/admin/audit-logs" class="nav-item">Audit Logs</a></li>
                <li><a href="/admin/integrations" class="nav-item">Integrations</a></li>
                <li><a href="/admin/data-migration" class="nav-item">Data Migration</a></li>
            </ul>
        </div>
    </nav>
</aside>

<script>

document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('.nav-section-header[data-section]').forEach(header => {
        header.addEventListener('click', function() {
            const section = this.closest('.nav-section');
            const items = section.querySelector('.nav-section-items');
            const toggle = this.querySelector('.nav-section-toggle');
            
            
            items.classList.toggle('expanded');
            
            
            this.classList.toggle('active');
        });
    });
    
    
    const currentPath = window.location.pathname;
    const currentHash = window.location.hash;
    
    document.querySelectorAll('.nav-item').forEach(link => {
        const href = link.getAttribute('href');
        if (href && (href === currentPath || href.startsWith(currentPath + '#'))) {
            
            link.classList.add('active');
            
            
            const section = link.closest('.nav-section');
            const header = section.querySelector('.nav-section-header');
            const items = section.querySelector('.nav-section-items');
            const toggle = header.querySelector('.nav-section-toggle');
            
            items.classList.add('expanded');
            header.classList.add('active');
        }
    });
    
    
    if (currentHash) {
        const tabMatch = currentHash.match(/#tab(\d+)/);
        if (tabMatch) {
            const tabId = 'tab' + tabMatch[1];
            const tabButton = document.querySelector(`[data-tab="${tabId}"]`);
            if (tabButton) {
                tabButton.click();
            }
        }
    }
});
</script>


<script>

document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('.nav-section-header[data-section]').forEach(header => {
        header.addEventListener('click', function() {
            const section = this.closest('.nav-section');
            const items = section.querySelector('.nav-section-items');
            const toggle = this.querySelector('.nav-section-toggle');
            
            
            const isExpanded = items.style.display === 'block';
            items.style.display = isExpanded ? 'none' : 'block';
            toggle.textContent = isExpanded ? '›' : '∨';
            
            
            this.classList.toggle('active');
        });
    });
    
    
    const currentPath = window.location.pathname;
    const currentHash = window.location.hash;
    
    document.querySelectorAll('.nav-item').forEach(link => {
        const href = link.getAttribute('href');
        if (href && (href === currentPath || href.startsWith(currentPath + '#'))) {
            
            link.classList.add('active');
            
            
            const section = link.closest('.nav-section');
            const header = section.querySelector('.nav-section-header');
            const items = section.querySelector('.nav-section-items');
            const toggle = header.querySelector('.nav-section-toggle');
            
            items.style.display = 'block';
            toggle.textContent = '∨';
            header.classList.add('active');
        }
    });
    
    
    if (currentHash) {
        const tabMatch = currentHash.match(/#tab(\d+)/);
        if (tabMatch) {
            const tabId = 'tab' + tabMatch[1];
            const tabButton = document.querySelector(`[data-tab="${tabId}"]`);
            if (tabButton) {
                tabButton.click();
            }
        }
    }
});
</script>


<script>

document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('.nav-section-header[data-section]').forEach(header => {
        header.addEventListener('click', function() {
            const section = this.closest('.nav-section');
            const items = section.querySelector('.nav-section-items');
            const toggle = this.querySelector('.nav-section-toggle');
            
            
            const isExpanded = items.style.display === 'block';
            items.style.display = isExpanded ? 'none' : 'block';
            toggle.textContent = isExpanded ? '›' : '∨';
            
            
            this.classList.toggle('active');
        });
    });
    
    
    const currentPath = window.location.pathname;
    const currentHash = window.location.hash;
    
    document.querySelectorAll('.nav-item').forEach(link => {
        const href = link.getAttribute('href');
        if (href && (href === currentPath || href.startsWith(currentPath + '#'))) {
            
            link.classList.add('active');
            
            
            const section = link.closest('.nav-section');
            const header = section.querySelector('.nav-section-header');
            const items = section.querySelector('.nav-section-items');
            const toggle = header.querySelector('.nav-section-toggle');
            
            items.style.display = 'block';
            toggle.textContent = '∨';
            header.classList.add('active');
        }
    });
    
    
    if (currentHash) {
        const tabMatch = currentHash.match(/#tab(\d+)/);
        if (tabMatch) {
            const tabId = 'tab' + tabMatch[1];
            const tabButton = document.querySelector(`[data-tab="${tabId}"]`);
            if (tabButton) {
                tabButton.click();
            }
        }
    }
});
</script>


    
    <div class="admin-main">
        
        <header class="admin-header">
            <div class="admin-header-content">
                <h1 class="admin-header-title">Analytics & Business Intelligence</h1>
                
                <div class="admin-header-actions">
                    <div class="admin-search">
                        <input type="text" placeholder="Search leads, properties...">
                    </div>
                    
                    <div class="user-dropdown" id="userDropdown">
                        <button class="admin-user-menu" onclick="toggleUserDropdown()">
                            <div class="admin-user-avatar">CG</div>
                            <div class="admin-user-info">
                                <div class="admin-user-name">Christopher Gross</div>
                                <div class="admin-user-role">Administrator</div>
                            </div>
                            <span class="dropdown-arrow">▼</span>
                        </button>
                        <div class="user-dropdown-menu" id="userDropdownMenu">
                            <a href="/admin/profile" class="user-dropdown-item">
                                <span>My Profile</span>
                            </a>
                            <a href="/admin/settings" class="user-dropdown-item">
                                <span>Settings</span>
                            </a>
                            <div class="user-dropdown-divider"></div>
                            <a href="/logout" class="user-dropdown-item">
                                <span>Logout</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        
        <div class="admin-content">
            
            <div class="tab-navigation">
                <button class="tab-button active" data-tab="tab1">Revenue</button>
                <button class="tab-button" data-tab="tab2">Conversion Funnel</button>
                <button class="tab-button" data-tab="tab3">Property Performance</button>
                <button class="tab-button" data-tab="tab4">Lead Analytics</button>
                <button class="tab-button" data-tab="tab5">Behavioral Insights</button>
                <button class="tab-button" data-tab="tab6">Friday Report</button>
            </div>

            
            <div id="tab1" class="tab-content active">
                
                
                <div class="dashboard-grid-4 gap-4 mb-6">
                    <div class="stat-card">
                        <div class="stat-card-label">Total Commission (YTD)</div>
                        <div class="stat-card-value">$287,450</div>
                        <div class="stat-card-change positive">+23% vs. last year</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Total Leases Closed</div>
                        <div class="stat-card-value">142</div>
                        <div class="stat-card-change positive">+18 this month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Commission per Lease</div>
                        <div class="stat-card-value">$2,024</div>
                        <div class="stat-card-change positive">+4% vs. last quarter</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Double-Ended Rate</div>
                        <div class="stat-card-value">34%</div>
                        <div class="stat-card-change positive">+6% vs. last quarter</div>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Monthly Revenue Trend</h3>
                            <div class="card-controls">
                                <button class="filter-btn active">12 Months</button>
                                <button class="filter-btn">6 Months</button>
                                <button class="filter-btn">3 Months</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="revenueChart" class="chart-md"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Deal Type Breakdown</h3>
                        </div>
                        <div class="card-body">
                            <div class="property-stats">
                                <div class="property-stat">
                                    <span class="property-stat-label">Double-Ended</span>
                                    <span class="property-stat-value property-stat-value-success">$124,300</span>
                                    <span class="property-stat-label">48 deals (43%)</span>
                                </div>
                                <div class="property-stat">
                                    <span class="property-stat-label">Listing-Side</span>
                                    <span class="property-stat-value">$98,650</span>
                                    <span class="property-stat-label">62 deals (34%)</span>
                                </div>
                                <div class="property-stat">
                                    <span class="property-stat-label">Tenant-Side</span>
                                    <span class="property-stat-value">$64,500</span>
                                    <span class="property-stat-label">32 deals (23%)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Agent Performance (This Quarter)</h3>
                        <button class="btn-primary">View Full Report</button>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Agent</th>
                                    <th>Total Leases</th>
                                    <th>Total Commission</th>
                                    <th>Avg Commission</th>
                                    <th>Double-Ended</th>
                                    <th>Listing-Side</th>
                                    <th>Tenant-Side</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Christopher Gross</strong></td>
                                    <td>38</td>
                                    <td>$82,450</td>
                                    <td>$2,170</td>
                                    <td>15 (39%)</td>
                                    <td>14 (37%)</td>
                                    <td>9 (24%)</td>
                                </tr>
                                <tr>
                                    <td><strong>Sarah Martinez</strong></td>
                                    <td>32</td>
                                    <td>$68,200</td>
                                    <td>$2,131</td>
                                    <td>11 (34%)</td>
                                    <td>13 (41%)</td>
                                    <td>8 (25%)</td>
                                </tr>
                                <tr>
                                    <td><strong>James Wilson</strong></td>
                                    <td>28</td>
                                    <td>$54,800</td>
                                    <td>$1,957</td>
                                    <td>8 (29%)</td>
                                    <td>12 (43%)</td>
                                    <td>8 (29%)</td>
                                </tr>
                                <tr>
                                    <td><strong>Emily Chen</strong></td>
                                    <td>24</td>
                                    <td>$48,600</td>
                                    <td>$2,025</td>
                                    <td>9 (38%)</td>
                                    <td>9 (38%)</td>
                                    <td>6 (25%)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            
            <div id="tab2" class="tab-content">
                
                
                <div class="dashboard-grid-4 gap-4 mb-6">
                    <div class="stat-card">
                        <div class="stat-card-label">Visitor → Lead</div>
                        <div class="stat-card-value">18.4%</div>
                        <div class="stat-card-change positive">+2.1% vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Lead → Inquiry</div>
                        <div class="stat-card-value">42.3%</div>
                        <div class="stat-card-change positive">+3.8% vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Inquiry → Application</div>
                        <div class="stat-card-value">28.1%</div>
                        <div class="stat-card-change positive">+1.4% vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Application → Lease</div>
                        <div class="stat-card-value">64.2%</div>
                        <div class="stat-card-change">-0.8% vs. last month</div>
                    </div>
                </div>

                
                <div class="card mt-6">
                    <div class="card-header d-flex justify-between align-items-center">
                        <h3 class="card-title">Full Conversion Funnel (Last 30 Days)</h3>
                        <div class="card-controls">
                            <button class="filter-btn active">30 Days</button>
                            <button class="filter-btn">90 Days</button>
                            <button class="filter-btn">12 Months</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="funnelChart" class="chart-lg"></canvas>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Conversion by Lead Segment</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Segment</th>
                                        <th>Leads</th>
                                        <th>Applications</th>
                                        <th>Conversion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge-danger">Hot</span></td>
                                        <td>248</td>
                                        <td>112</td>
                                        <td><strong>45.2%</strong></td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge-warning">Warm</span></td>
                                        <td>512</td>
                                        <td>168</td>
                                        <td><strong>32.8%</strong></td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge-info">Cold</span></td>
                                        <td>834</td>
                                        <td>92</td>
                                        <td><strong>11.0%</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Time to Convert</h3>
                        </div>
                        <div class="card-body">
                            <div class="property-stats">
                                <div class="property-stat">
                                    <span class="property-stat-label">Lead → Application</span>
                                    <span class="property-stat-value">8.4 days</span>
                                    <span class="property-stat-label">Median: 6 days</span>
                                </div>
                                <div class="property-stat">
                                    <span class="property-stat-label">Application → Approval</span>
                                    <span class="property-stat-value property-stat-value-success">2.1 days</span>
                                    <span class="property-stat-label">Median: 2 days</span>
                                </div>
                                <div class="property-stat">
                                    <span class="property-stat-label">Approval → Lease Signature</span>
                                    <span class="property-stat-value">4.8 days</span>
                                    <span class="property-stat-label">Median: 4 days</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Drop-Off Analysis (Last 30 Days)</h3>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Stage</th>
                                    <th>Entered</th>
                                    <th>Converted</th>
                                    <th>Dropped Off</th>
                                    <th>Drop-Off Rate</th>
                                    <th>Top Reason</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Visitor → Lead</strong></td>
                                    <td>8,642</td>
                                    <td>1,590</td>
                                    <td>7,052</td>
                                    <td>81.6%</td>
                                    <td>No engagement</td>
                                </tr>
                                <tr>
                                    <td><strong>Lead → Inquiry</strong></td>
                                    <td>1,590</td>
                                    <td>672</td>
                                    <td>918</td>
                                    <td>57.7%</td>
                                    <td>Price concerns</td>
                                </tr>
                                <tr>
                                    <td><strong>Inquiry → Application</strong></td>
                                    <td>672</td>
                                    <td>189</td>
                                    <td>483</td>
                                    <td>71.9%</td>
                                    <td>Found alternative</td>
                                </tr>
                                <tr>
                                    <td><strong>Application → Lease</strong></td>
                                    <td>189</td>
                                    <td>121</td>
                                    <td>68</td>
                                    <td>36.0%</td>
                                    <td>Credit/income issues</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            
            <div id="tab3" class="tab-content">
                
                
                <div class="dashboard-grid-4 gap-4 mb-6">
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Applications per Property</div>
                        <div class="stat-card-value">8.4</div>
                        <div class="stat-card-change positive">+1.2 vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Days to Lease</div>
                        <div class="stat-card-value">14.2</div>
                        <div class="stat-card-change positive">-2.1 days vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Current Occupancy Rate</div>
                        <div class="stat-card-value">96.8%</div>
                        <div class="stat-card-change positive">+1.4% vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Rent vs. Market</div>
                        <div class="stat-card-value">+4.2%</div>
                        <div class="stat-card-change positive">Above market average</div>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Top Performing Properties (Last 90 Days)</h3>
                        <div class="card-controls">
                            <button class="filter-btn active">Applications</button>
                            <button class="filter-btn">Days to Lease</button>
                            <button class="filter-btn">Revenue</button>
                        </div>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Applications</th>
                                    <th>Days to Lease</th>
                                    <th>Tour Requests</th>
                                    <th>Conversion Rate</th>
                                    <th>Monthly Rent</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>1234 Memorial Dr #402</strong></td>
                                    <td>18</td>
                                    <td>6 days</td>
                                    <td>42</td>
                                    <td>42.9%</td>
                                    <td>$2,450</td>
                                    <td><span class="badge-success">Leased</span></td>
                                </tr>
                                <tr>
                                    <td><strong>5678 Westheimer Rd #201</strong></td>
                                    <td>16</td>
                                    <td>8 days</td>
                                    <td>38</td>
                                    <td>42.1%</td>
                                    <td>$2,200</td>
                                    <td><span class="badge-success">Leased</span></td>
                                </tr>
                                <tr>
                                    <td><strong>9012 Richmond Ave #105</strong></td>
                                    <td>14</td>
                                    <td>10 days</td>
                                    <td>34</td>
                                    <td>41.2%</td>
                                    <td>$1,950</td>
                                    <td><span class="badge-success">Leased</span></td>
                                </tr>
                                <tr>
                                    <td><strong>3456 Kirby Dr #302</strong></td>
                                    <td>12</td>
                                    <td>12 days</td>
                                    <td>28</td>
                                    <td>42.9%</td>
                                    <td>$2,100</td>
                                    <td><span class="badge-success">Leased</span></td>
                                </tr>
                                <tr>
                                    <td><strong>7890 Montrose Blvd #501</strong></td>
                                    <td>11</td>
                                    <td>14 days</td>
                                    <td>26</td>
                                    <td>42.3%</td>
                                    <td>$2,350</td>
                                    <td><span class="badge-success">Leased</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Properties Needing Attention</h3>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Days Vacant</th>
                                    <th>Inquiries</th>
                                    <th>Applications</th>
                                    <th>Tour Requests</th>
                                    <th>Monthly Rent</th>
                                    <th>Issue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>2468 Montrose Blvd #203</strong></td>
                                    <td>42 days</td>
                                    <td>8</td>
                                    <td>1</td>
                                    <td>6</td>
                                    <td>$2,800</td>
                                    <td><span class="badge-danger">Price too high</span></td>
                                </tr>
                                <tr>
                                    <td><strong>1357 Heights Blvd #101</strong></td>
                                    <td>38 days</td>
                                    <td>12</td>
                                    <td>2</td>
                                    <td>10</td>
                                    <td>$2,100</td>
                                    <td><span class="badge-warning">Low conversion</span></td>
                                </tr>
                                <tr>
                                    <td><strong>9753 Washington Ave #405</strong></td>
                                    <td>34 days</td>
                                    <td>6</td>
                                    <td>0</td>
                                    <td>4</td>
                                    <td>$2,650</td>
                                    <td><span class="badge-warning">Poor photos</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Performance by Neighborhood</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="neighborhoodChart" class="chart-md"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Rent vs. Market Comparison</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Neighborhood</th>
                                        <th>Your Avg</th>
                                        <th>Market Avg</th>
                                        <th>Difference</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Memorial</strong></td>
                                        <td>$2,380</td>
                                        <td>$2,250</td>
                                        <td class="text-success">+5.8%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Montrose</strong></td>
                                        <td>$2,520</td>
                                        <td>$2,450</td>
                                        <td class="text-success">+2.9%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Heights</strong></td>
                                        <td>$2,140</td>
                                        <td>$2,180</td>
                                        <td class="text-error">-1.8%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Midtown</strong></td>
                                        <td>$2,680</td>
                                        <td>$2,550</td>
                                        <td class="text-success">+5.1%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            
            <div id="tab4" class="tab-content">
                
                
                <div class="dashboard-grid-4 gap-4 mb-6">
                    <div class="stat-card">
                        <div class="stat-card-label">Total Leads (30 Days)</div>
                        <div class="stat-card-value">1,590</div>
                        <div class="stat-card-change positive">+142 vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Hot Leads</div>
                        <div class="stat-card-value">248</div>
                        <div class="stat-card-change positive">15.6% of total</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Warm Leads</div>
                        <div class="stat-card-value">512</div>
                        <div class="stat-card-change">32.2% of total</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg FUB Score</div>
                        <div class="stat-card-value">64.2</div>
                        <div class="stat-card-change positive">+3.8 vs. last month</div>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Lead Source Performance</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Source</th>
                                        <th>Leads</th>
                                        <th>Applications</th>
                                        <th>Conversion</th>
                                        <th>Avg Score</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Organic Search</strong></td>
                                        <td>642</td>
                                        <td>112</td>
                                        <td>17.4%</td>
                                        <td>72.3</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Property Alerts</strong></td>
                                        <td>384</td>
                                        <td>84</td>
                                        <td>21.9%</td>
                                        <td>78.6</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Paid Ads</strong></td>
                                        <td>298</td>
                                        <td>21</td>
                                        <td>7.0%</td>
                                        <td>58.2</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Referrals</strong></td>
                                        <td>186</td>
                                        <td>48</td>
                                        <td>25.8%</td>
                                        <td>82.4</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Social Media</strong></td>
                                        <td>80</td>
                                        <td>8</td>
                                        <td>10.0%</td>
                                        <td>62.1</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">FUB Score Distribution</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="scoreDistributionChart" class="chart-md"></canvas>
                        </div>
                    </div>
                </div>

                
                <div class="card mt-6">
                    <div class="card-header d-flex justify-between align-items-center">
                        <h3 class="card-title">Lead Quality Trends (Last 6 Months)</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="leadQualityChart" class="chart-md"></canvas>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Re-Engagement Campaign Performance</h3>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Campaign</th>
                                    <th>Sent</th>
                                    <th>Opened</th>
                                    <th>Clicked</th>
                                    <th>Re-Engaged</th>
                                    <th>Applications</th>
                                    <th>ROI</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Cold Lead Reactivation</strong></td>
                                    <td>1,240</td>
                                    <td>342 (27.6%)</td>
                                    <td>128 (10.3%)</td>
                                    <td>84 (6.8%)</td>
                                    <td>12</td>
                                    <td class="text-success">+$4,200</td>
                                </tr>
                                <tr>
                                    <td><strong>Viewer Follow-Up</strong></td>
                                    <td>486</td>
                                    <td>218 (44.9%)</td>
                                    <td>94 (19.3%)</td>
                                    <td>62 (12.8%)</td>
                                    <td>18</td>
                                    <td class="text-success">+$6,800</td>
                                </tr>
                                <tr>
                                    <td><strong>Application Abandonment</strong></td>
                                    <td>142</td>
                                    <td>98 (69.0%)</td>
                                    <td>64 (45.1%)</td>
                                    <td>48 (33.8%)</td>
                                    <td>24</td>
                                    <td class="text-success">+$9,200</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            
            <div id="tab5" class="tab-content">
                
                
                <div class="dashboard-grid-4 gap-4 mb-6">
                    <div class="stat-card">
                        <div class="stat-card-label">Total Sessions (30 Days)</div>
                        <div class="stat-card-value">8,642</div>
                        <div class="stat-card-change positive">+624 vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Session Duration</div>
                        <div class="stat-card-value">3.2 min</div>
                        <div class="stat-card-change positive">+0.4 min vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Avg Page Views</div>
                        <div class="stat-card-value">6.4</div>
                        <div class="stat-card-change positive">+0.8 vs. last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-label">Bounce Rate</div>
                        <div class="stat-card-value">32.4%</div>
                        <div class="stat-card-change positive">-2.8% vs. last month</div>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Device Performance</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Device</th>
                                        <th>Sessions</th>
                                        <th>Avg Duration</th>
                                        <th>Page Views</th>
                                        <th>Conversion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Desktop</strong></td>
                                        <td>4,842 (56%)</td>
                                        <td>4.2 min</td>
                                        <td>8.2</td>
                                        <td>3.8%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Mobile</strong></td>
                                        <td>3,284 (38%)</td>
                                        <td>2.4 min</td>
                                        <td>5.1</td>
                                        <td>3.2%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Tablet</strong></td>
                                        <td>516 (6%)</td>
                                        <td>3.6 min</td>
                                        <td>6.8</td>
                                        <td>3.6%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Browser Performance</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Browser</th>
                                        <th>Sessions</th>
                                        <th>Conversion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Chrome</strong></td>
                                        <td>5,284 (61%)</td>
                                        <td>3.6%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Safari</strong></td>
                                        <td>2,142 (25%)</td>
                                        <td>3.4%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Firefox</strong></td>
                                        <td>864 (10%)</td>
                                        <td>3.2%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Edge</strong></td>
                                        <td>352 (4%)</td>
                                        <td>3.8%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                
                <div class="property-card mt-6">
                    <div class="property-card-header">
                        <h3>Event Tracking (Last 30 Days)</h3>
                    </div>
                    <div class="property-card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Event Type</th>
                                    <th>Total Events</th>
                                    <th>Unique Users</th>
                                    <th>Avg per Session</th>
                                    <th>Conversion Impact</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Property Viewed</strong></td>
                                    <td>24,842</td>
                                    <td>6,284</td>
                                    <td>2.9</td>
                                    <td class="text-success">+12% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Property Saved</strong></td>
                                    <td>3,486</td>
                                    <td>2,142</td>
                                    <td>0.4</td>
                                    <td class="text-success">+34% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Tour Requested</strong></td>
                                    <td>1,284</td>
                                    <td>1,142</td>
                                    <td>0.15</td>
                                    <td class="text-success">+58% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Inquiry Submitted</strong></td>
                                    <td>842</td>
                                    <td>784</td>
                                    <td>0.10</td>
                                    <td class="text-success">+72% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Application Started</strong></td>
                                    <td>342</td>
                                    <td>312</td>
                                    <td>0.04</td>
                                    <td class="text-success">+86% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Application Completed</strong></td>
                                    <td>189</td>
                                    <td>189</td>
                                    <td>0.02</td>
                                    <td class="text-success">100% (goal)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                
                <div class="dashboard-grid-3 gap-6 mt-6">
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Top Referrer Sources</h3>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Source</th>
                                        <th>Sessions</th>
                                        <th>Conversion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Google Search</strong></td>
                                        <td>3,842</td>
                                        <td>4.2%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Direct</strong></td>
                                        <td>2,486</td>
                                        <td>5.8%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Facebook</strong></td>
                                        <td>842</td>
                                        <td>2.1%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Zillow</strong></td>
                                        <td>642</td>
                                        <td>3.4%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Apartments.com</strong></td>
                                        <td>486</td>
                                        <td>2.8%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">
                            <h3 class="card-title">Engagement Patterns</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="engagementChart" class="chart-md"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            
            <div id="tab6" class="tab-content">
                <div class="dashboard-grid-3">
                    
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Weekly Property Report</span>
                            <div style="display: flex; gap: var(--space-2);">
                                <button id="friday-copy-btn" class="btn-primary">Copy to Clipboard</button>
                                <button id="friday-generate-btn" class="btn-secondary">Regenerate</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="friday-report-preview">
                                
                            </div>
                        </div>
                    </div>
                    
                    
                    <div class="card">
                        <div class="card-header d-flex justify-between align-items-center">Report Settings</div>
                        <div class="card-body">
                            <div style="margin-bottom: var(--space-5);">
                                <label class="form-label">Owner Name</label>
                                <input type="text" id="friday-owner-name" value="[Owner Name]" class="form-input" style="width: 100%;">
                            </div>
                            
                            <div style="margin-bottom: var(--space-5);">
                                <label class="form-label">Date Range</label>
                                <select id="friday-date-range" class="form-select" style="width: 100%;">
                                    <option value="this-week" selected>This Week</option>
                                    <option value="last-week">Last Week</option>
                                </select>
                            </div>
                            
                            <div style="padding: var(--space-4); background: var(--color-gray-50); border-radius: var(--border-radius-md); margin-top: var(--space-5);">
                                <p style="font-size: 13px; color: var(--color-gray-600); line-height: 1.6; margin: 0;">💡 <strong>Tip:</strong> Copy the report and paste it directly into your email to send to the owner.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                
                
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');
            });
        });

        
        const chartColors = {
            primary: '#1e3a5f',      // Navy - primary data
            secondary: '#d4af37',     // Gold - secondary/accent data
            success: '#10b981',       // Green - positive metrics
            danger: '#ef4444',        // Red - negative metrics
            warning: '#f59e0b',       // Orange - warnings
            info: '#06b6d4',          // Cyan - informational
            gray: '#6b7280'           // Gray - neutral/baseline
        };

        
        const revenueCtx = document.getElementById('revenueChart');
        if (revenueCtx) {
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Commission Revenue',
                        data: [18200, 22400, 24800, 26200, 28400, 25600, 29800, 31200, 28600, 32400, 30800, 34200],
                        borderColor: chartColors.primary,
                        backgroundColor: chartColors.primary + '20',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        
        const funnelCtx = document.getElementById('funnelChart');
        if (funnelCtx) {
            new Chart(funnelCtx, {
                type: 'bar',
                data: {
                    labels: ['Visitors', 'Leads', 'Inquiries', 'Applications', 'Leases'],
                    datasets: [{
                        label: 'Count',
                        data: [8642, 1590, 672, 189, 121],
                        backgroundColor: [
                            chartColors.info,
                            chartColors.primary,
                            chartColors.warning,
                            chartColors.success,
                            chartColors.danger
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        
        const neighborhoodCtx = document.getElementById('neighborhoodChart');
        if (neighborhoodCtx) {
            new Chart(neighborhoodCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Memorial', 'Montrose', 'Heights', 'Midtown', 'Other'],
                    datasets: [{
                        data: [28, 24, 18, 16, 14],
                        backgroundColor: [
                            chartColors.primary,
                            chartColors.success,
                            chartColors.warning,
                            chartColors.info,
                            chartColors.gray
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        
        const scoreCtx = document.getElementById('scoreDistributionChart');
        if (scoreCtx) {
            new Chart(scoreCtx, {
                type: 'bar',
                data: {
                    labels: ['0-20', '21-40', '41-60', '61-80', '81-100'],
                    datasets: [{
                        label: 'Leads',
                        data: [142, 284, 486, 512, 166],
                        backgroundColor: chartColors.primary
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        
        const leadQualityCtx = document.getElementById('leadQualityChart');
        if (leadQualityCtx) {
            new Chart(leadQualityCtx, {
                type: 'line',
                data: {
                    labels: ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [
                        {
                            label: 'Hot Leads',
                            data: [186, 204, 218, 232, 242, 248],
                            borderColor: chartColors.danger,
                            tension: 0.4
                        },
                        {
                            label: 'Warm Leads',
                            data: [428, 446, 468, 486, 498, 512],
                            borderColor: chartColors.warning,
                            tension: 0.4
                        },
                        {
                            label: 'Cold Leads',
                            data: [742, 768, 794, 812, 824, 830],
                            borderColor: chartColors.info,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        
        const engagementCtx = document.getElementById('engagementChart');
        if (engagementCtx) {
            new Chart(engagementCtx, {
                type: 'radar',
                data: {
                    labels: ['Page Views', 'Time on Site', 'Interactions', 'Return Visits', 'Engagement Score'],
                    datasets: [{
                        label: 'Desktop',
                        data: [85, 78, 82, 68, 76],
                        borderColor: chartColors.primary,
                        backgroundColor: chartColors.primary + '20'
                    }, {
                        label: 'Mobile',
                        data: [62, 54, 68, 72, 64],
                        borderColor: chartColors.success,
                        backgroundColor: chartColors.success + '20'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }
        
        
        const fridayReportData = [
          {
            address: "123 Main St",
            status: "leased",
            closeDate: "Nov 18, 2024",
            cdom: 14,
            price: 3200,
            specs: { beds: 4, baths: 3, sqft: 2400 },
            leads: { total: 12, hot: 8, warm: 3, cold: 1 },
            showings: { total: 3, scheduled: 2, completed: 1 },
            applications: { total: 1 },
            market: { avgDaysOnMarket: 21 },
            conversion: { daysToLease: 14, leadName: "Sarah Johnson", viewCount: 12, showingCount: 2, vsPortfolioAvg: -7 }
          },
          {
            address: "456 Oak Ave",
            status: "active",
            cdom: 14,
            price: 3200,
            specs: { beds: 4 },
            leads: { total: 12, hot: 8 },
            showings: { total: 3, scheduled: 3 },
            applications: { total: 0 },
            market: { avgDaysOnMarket: 21 },
            engine: { performanceLevel: "strong" }
          },
          {
            address: "789 Pine St",
            status: "active",
            cdom: 28,
            price: 2800,
            specs: { beds: 3 },
            leads: { total: 4, hot: 1 },
            showings: { total: 1 },
            applications: { total: 0 },
            market: { avgDaysOnMarket: 20, comparablePrice: { low: 2400, high: 2600 } },
            engine: { performanceLevel: "needs_attention" }
          },
          {
            address: "234 Elm Dr",
            status: "active",
            cdom: 21,
            price: 2200,
            specs: { beds: 2 },
            leads: { total: 8, hot: 3 },
            showings: { total: 3, scheduled: 3 },
            applications: { total: 0 },
            market: { avgDaysOnMarket: 25 },
            engine: { performanceLevel: "steady" }
          }
        ];

        function generateFridayCommentary(property) {
            const { performanceLevel } = property.engine || {};
            if (property.status === 'leased') {
                const { conversion } = property;
                return `Leased in just ${conversion.daysToLease} days to ${conversion.leadName} after ${conversion.showingCount} showings. Fast conversion - ${Math.abs(conversion.vsPortfolioAvg)} days faster than our portfolio average. Strong initial traction with ${conversion.viewCount} views from multiple qualified leads helped accelerate the process. Market timing was optimal with high demand for ${property.specs.beds}-bed properties in this area.`;
            }
            switch (performanceLevel) {
                case 'strong':
                    return `Outperforming with strong lead quality - ${property.leads.hot} highly qualified leads in just ${property.cdom} days, well below market average of ${property.market.avgDaysOnMarket} days. ${property.showings.scheduled} showings scheduled this week with serious prospects. Based on lead engagement patterns and showing feedback, expecting application within 7 days. Pricing is competitive at $${property.price.toLocaleString()} for this ${property.specs.beds}-bed luxury unit.`;
                case 'needs_attention':
                    return `Traffic is running 40% below similar ${property.specs.beds}-bed properties in the area. Only ${property.leads.total} views in ${property.cdom} days suggests pricing or presentation issue. Comparable properties leased at $${property.market.comparablePrice.low.toLocaleString()}-$${property.market.comparablePrice.high.toLocaleString()} vs our $${property.price.toLocaleString()} asking. One showing last week but feedback indicated price concerns. Consider adjustment to $${(property.market.comparablePrice.low + property.market.comparablePrice.high) / 2} to accelerate conversion and align with market comps.`;
                case 'steady':
                    return `Steady progress with ${property.leads.total} leads and ${property.showings.scheduled} showings scheduled in ${property.cdom} days. This is on track with the market average of ${property.market.avgDaysOnMarket} days. Lead quality is good for this price point, with ${property.leads.hot} serious prospects engaged. Expecting applications to come in within the next 7-10 days.`;
                default:
                    return '';
            }
        }

        function generateFridayReport() {
            let html = '';
            const closings = fridayReportData.filter(p => p.status === 'leased');
            if (closings.length > 0) {
                html += '<div style="margin-bottom: var(--space-8);"><h3 style="font-size: 13px; font-weight: 700; text-transform: uppercase; color: var(--color-gray-600); margin: 0 0 var(--space-5) 0; letter-spacing: 0.8px;">CLOSINGS THIS WEEK</h3>';
                closings.forEach(property => {
                    html += `<div style="margin-bottom: var(--space-6); padding-bottom: var(--space-6); border-bottom: 1px solid var(--color-gray-200);">
                        <div class="property-address" style="margin-bottom: var(--space-2);">${property.address} <span style="color: var(--success-color);">✓</span></div>
                        <div class="property-details" style="margin-bottom: var(--space-3);">Closes ${property.closeDate}</div>
                        <p style="font-size: 15px; line-height: 1.7; color: var(--color-gray-700); margin: 0;">${generateFridayCommentary(property)}</p>
                    </div>`;
                });
                html += '</div>';
            }
            const activeListings = fridayReportData.filter(p => p.status === 'active');
            if (activeListings.length > 0) {
                html += '<div><h3 style="font-size: 13px; font-weight: 700; text-transform: uppercase; color: var(--color-gray-600); margin: 0 0 var(--space-5) 0; letter-spacing: 0.8px;">ACTIVE LISTINGS</h3>';
                activeListings.forEach(property => {
                    html += `<div style="margin-bottom: var(--space-6); padding-bottom: var(--space-6); border-bottom: 1px solid var(--color-gray-200);">
                        <div class="property-address" style="margin-bottom: var(--space-2);">${property.address}</div>
                        <div class="property-details" style="margin-bottom: var(--space-3);">CDOM: ${property.cdom} days • Leads: ${property.leads.total} • Showings: ${property.showings.total} • Applications: ${property.applications.total}</div>
                        <p style="font-size: 15px; line-height: 1.7; color: var(--color-gray-700); margin: 0;">${generateFridayCommentary(property)}</p>
                    </div>`;
                });
                html += '</div>';
            }
            document.getElementById('friday-report-preview').innerHTML = html;
        }

        document.getElementById('friday-generate-btn')?.addEventListener('click', generateFridayReport);
        document.getElementById('friday-copy-btn')?.addEventListener('click', () => {
            const reportText = document.getElementById('friday-report-preview').innerText;
            navigator.clipboard.writeText(reportText).then(() => {
                const btn = document.getElementById('friday-copy-btn');
                btn.textContent = 'Copied!';
                setTimeout(() => { btn.textContent = 'Copy to Clipboard'; }, 2000);
            });
        });
        
        
        document.querySelector('[data-tab="tab6"]')?.addEventListener('click', () => {
            setTimeout(generateFridayReport, 100);
        });

        // User Dropdown Toggle
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('userDropdown');
            const isClickInside = dropdown?.contains(event.target);
            if (!isClickInside && dropdown?.classList.contains('active')) {
                dropdown.classList.remove('active');
            }
        });
    </script>
</body>
</html>
